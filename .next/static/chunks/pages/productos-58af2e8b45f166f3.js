(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{4918:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos",function(){return s(1072)}])},1072:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return S},default:function(){return C}});var i=s(5893),r=s(1857),n=s.n(r),o=s(7294),c=s(9008),a=s.n(c),l=s(3167),d=s.n(l),u=s(4175),_=s.n(u);class h extends o.Component{toggleSelection(e){let{type:t,selection:s}=this.state;"checkbox"===t?s.includes(e)?(this.setState({selection:s.filter(t=>t!==e)}),this.props.default&&this.props.default===e&&(this.activeDefault=!1),this.props.handleFilters(this.filterName,s.filter(t=>t!==e))):(this.setState({selection:[...s,e]}),this.props.handleFilters(this.filterName,[...s,e])):(this.setState({selection:[e]}),this.props.handleFilters(this.filterName,s))}componentDidUpdate(e,t){this.props.default&&this.activeDefault&&!this.state.selection.includes(this.props.default)&&this.setState({selection:[this.props.default]})}render(){let{selection:e}=this.state,{items:t}=this.props;return(0,i.jsx)("ul",{className:_().selectionable_items,children:t&&t.map((t,s)=>(0,i.jsx)(p,{selected:e.includes(t._id),onClick:()=>this.toggleSelection(t._id),label:t.name},s))})}constructor(e){super(e),this.state={type:"checkbox",selection:[]},this.handleFilters=this.props.handleFilters,this.filterName=this.props.filterName,this.filters=this.props.filters,this.props=e,this.activeDefault=!0}}class p extends o.PureComponent{render(){let{selected:e,onClick:t,label:s,effect:r="checkmark"}=this.props;return(0,i.jsxs)("li",{className:_().selectionable_items__item,onClick:t,children:[(0,i.jsx)("span",{className:_().box}),(0,i.jsx)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{stroke:"lightgreen",strokeWidth:"14",fill:"none",d:"M16.667,62.167c3.109,5.55,7.217,10.591,10.926,15.75 c2.614,3.636,5.149,7.519,8.161,10.853c-0.046-0.051,1.959,2.414,2.692,2.343c0.895-0.088,6.958-8.511,6.014-7.3 c5.997-7.695,11.68-15.463,16.931-23.696c6.393-10.025,12.235-20.373,18.104-30.707C82.004,24.988,84.802,20.601,87,16",strokeDashoffset:e?0:126.36953735351563,style:{strokeLinecap:"round",strokeLinejoin:"round",transition:"stroke-dashoffset 0.2s ease-in-out",strokeDasharray:"".concat(126.36953735351563," ").concat(126.36953735351563)}})}),s&&(0,i.jsx)("span",{className:_().label,style:{color:e?"lightgreen":"white"},children:s})]})}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var x=s(4802),f=s.n(x);class v extends o.Component{componentDidMount(){let{currentMin:e,currentMax:t,max:s}=this.state;this.minValue.style.width=100*e/s+"%",this.maxValue.style.width=100*t/s+"%",this.setState({sliderWidth:this.slider.offsetWidth,offsetSliderWidht:this.slider.offsetLeft})}render(){let{min:e,max:t,currentMin:s,inputMin:r,currentMax:n,inputMax:o,minValueBetween:c}=this.state;return(0,i.jsxs)("div",{className:f().card,children:[(0,i.jsxs)("div",{className:f().current_value,children:[(0,i.jsxs)("div",{style:{marginBottom:10},children:[(0,i.jsx)("label",{htmlFor:f().min_input,children:"Min: "}),(0,i.jsx)("input",{id:f().min_input,type:"number",onChange:this.setMin,value:r,min:e,max:this.maxForMin()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:f().max_input,children:"Max: "}),(0,i.jsx)("input",{id:f().max_input,type:"number",onChange:this.setMax,value:o,min:this.minForMax(),max:t})]})]}),(0,i.jsxs)("div",{className:f().values,children:[(0,i.jsx)("div",{children:e}),(0,i.jsx)("div",{children:t})]}),(0,i.jsxs)("div",{ref:e=>this.slider=e,id:f().slider,children:[(0,i.jsx)("div",{ref:e=>this.minValue=e,id:f().min,"data-content":s,children:(0,i.jsx)("div",{ref:e=>this.minValueDrag=e,id:f().min_drag,onMouseDown:this.changeMinValue,onTouchStart:this.changeMinValue})}),(0,i.jsx)("div",{ref:e=>this.maxValue=e,id:f().max,"data-content":n,children:(0,i.jsx)("div",{ref:e=>this.maxValueDrag=e,id:f().max_drag,onMouseDown:this.changeMaxValue,onTouchStart:this.changeMaxValue})})]})]})}constructor(e){super(e),m(this,"setMin",e=>{let{min:t,max:s,currentMax:i,minValueBetween:r}=this.state,n=e.target.value;this.setState({inputMin:n}),n>=t&&n<=i-r&&(this.setState({currentMin:parseInt(n)}),this.minValue.style.width=100*n/s+"%")}),m(this,"changeMinValue",e=>{e.preventDefault(),document.addEventListener("mousemove",this.onMouseMoveMin),document.addEventListener("mouseup",this.onMouseUpMin),document.addEventListener("touchmove",this.onMouseMoveMin),document.addEventListener("touchend",this.onMouseUpMin)}),m(this,"onMouseMoveMin",e=>{let{min:t,max:s,currentMax:i,minValueBetween:r,sliderWidth:n,offsetSliderWidht:o}=this.state,c=e.clientX-o,a=100*c/n,l=Math.abs(parseInt(s*a/100));l>=t&&l<=i-r&&(this.minValue.style.width=a+"%",this.minValue.dataset.content=l,this.setState({currentMin:l,inputMin:s*a/100<0?0:l}),this.props.handleMin(parseInt(l)))}),m(this,"onMouseUpMin",()=>{document.removeEventListener("mouseup",this.onMouseUpMin),document.removeEventListener("mousemove",this.onMouseMoveMin),document.removeEventListener("touchend",this.onMouseMoveMin),document.removeEventListener("touchmove",this.onMouseUpMin)}),m(this,"setMax",e=>{let{min:t,max:s,currentMin:i,currentMax:r,minValueBetween:n}=this.state,o=e.target.value;this.setState({inputMax:o}),o>=i+n&&o<=s&&(this.setState({currentMax:parseInt(o)}),this.maxValue.style.width=100*o/s+"%")}),m(this,"changeMaxValue",e=>{e.preventDefault(),document.addEventListener("mousemove",this.onMouseMoveMax),document.addEventListener("mouseup",this.onMouseUpMax),document.addEventListener("touchmove",this.onMouseMoveMax),document.addEventListener("touchend",this.onMouseUpMax)}),m(this,"onMouseMoveMax",e=>{let{max:t,currentMin:s,minValueBetween:i,sliderWidth:r,offsetSliderWidht:n}=this.state,o=this.maxValue,c=e.clientX-n,a=100*c/r,l=Math.abs(parseInt(t*a/100));l>=s+i&&l<=t&&(o.style.width=a+"%",o.dataset.content=l,this.setState({currentMax:l,inputMax:parseInt(t*a/100)>0?l:0}),this.props.handleMax(parseInt(l)))}),m(this,"onMouseUpMax",()=>{document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMoveMax),document.removeEventListener("touchend",this.onMouseUp),document.removeEventListener("touchmove",this.onMouseMoveMax)}),m(this,"maxForMin",()=>{let{currentMax:e,minValueBetween:t}=this.state;return e-t}),m(this,"minForMax",()=>{let{currentMin:e,minValueBetween:t}=this.state;return e+t}),this.state={sliderWidth:0,offsetSliderWidht:0,min:0,max:this.props.max,minValueBetween:10,currentMin:0,inputMin:0,currentMax:this.props.max,inputMax:this.props.max},this.handleMin=this.props.handleMin,this.handleMax=this.props.handleMax,this.props=e}}var j=s(9603),M=s(9417);function b(e){let{categories:t,types:s,colors:r,sizes:n,setProducts:c,originalProducts:a,maxPrice:l,minPrice:u,queryCategory:_}=e,[p,m]=(0,o.useState)({categories:[],types:[],colors:[],sizes:[],price:{min:u,max:l}}),[x,f]=(0,o.useState)(!1),b=(e,t)=>{m({...p,[e]:t})},g=e=>{m({...p,price:{...p.price,max:e}})},w=e=>{m({...p,price:{...p.price,min:e}})};return(0,o.useEffect)(()=>{let e=a.filter(e=>{let t=!0,s=!0,i=!0,r=!0;return(console.log(p.colors),p.categories.length>0&&(t=p.categories.includes(e.category._id)),p.types.length>0&&(s=p.types.includes(e.clothe_type._id)),p.colors.length>0&&(i=e.colors.some(e=>p.colors.includes(e.color))),(p.price.min>0||p.price.max<5e4)&&(r=e.priceWithOffer?e.priceWithOffer>=p.price.min&&e.priceWithOffer<=p.price.max:e.price>=p.price.min&&e.price<=p.price.max),t&&s&&i&&r)?t&&s&&i&&r:c([])});c(e)},[p]),(0,o.useEffect)(()=>{_&&m({...p,categories:[_]})},[_]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"button_design",id:d().filters_button_active,onClick:e=>f(!x),children:(0,i.jsxs)("p",{children:["Filtros ",(0,i.jsx)(j.G,{icon:M.yOZ,style:{transform:x?"rotate(180deg)":"none"}})]})}),(0,i.jsxs)("aside",{id:d().products_filter,style:{left:x?"0":"-100%"},children:[(0,i.jsx)("h3",{children:"Filtros"}),(0,i.jsx)(j.G,{icon:M.EyR,id:d().close_filters,onClick:e=>f(!1),style:{transform:x?"none":"rotate(180deg)"}}),(0,i.jsxs)("div",{className:d().filter,children:[(0,i.jsx)("h4",{children:"Categor\xedas"}),(0,i.jsx)(h,{handleFilters:b,filterName:"categories",filters:p,items:t,default:_})]}),(0,i.jsxs)("div",{className:d().filter,children:[(0,i.jsx)("h4",{children:"Tipo de prenda"}),(0,i.jsx)(h,{handleFilters:b,filterName:"types",filters:p,items:s})]}),(0,i.jsxs)("div",{className:d().filter,children:[(0,i.jsx)("h4",{children:"Colores"}),(0,i.jsx)(h,{handleFilters:b,filterName:"colors",filters:p,items:r})]}),(0,i.jsxs)("div",{className:d().filter,children:[(0,i.jsx)("h4",{children:"Precio"}),(0,i.jsx)(v,{handleMax:g,handleMin:w,min:p.price.min,max:p.price.max,minValueBetween:10})]})]})]})}var g=s(5952),w=s.n(g),y=s(1568);function k(e){let{products:t,sizes:s}=e;return(0,i.jsxs)("section",{id:w().products_section,children:[(0,i.jsx)("h1",{children:"Nuestro catalogo!"}),(0,i.jsxs)("div",{className:"jsx-89a85778f3985c6b products_container",children:[t.map(e=>(0,i.jsx)(y.Z,{product:e,sizes:s},e._id)),(0,i.jsx)(n(),{id:"89a85778f3985c6b",children:".products_container.jsx-89a85778f3985c6b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;padding:0 50px;margin-top:var(--margin-within-sections);width:100%}@media screen and (max-width:768px){.products_container.jsx-89a85778f3985c6b{padding:0 20px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}}"})]})]})}var N=s(1163),S=!0;function C(e){let{products:t,categories:s,types:r,colors:c,sizes:l}=e,[d,u]=(0,o.useState)(t),[_,h]=(0,o.useState)(Math.min(...t.map(e=>e.priceWithOffer||e.price))),[p,m]=(0,o.useState)(Math.max(...t.map(e=>e.priceWithOffer||e.price))+500),[x,f]=(0,o.useState)(null),v=(0,N.useRouter)(),{category:j}=v.query;return(0,o.useEffect)(()=>{j&&f(s.find(e=>e.name===j))},[j]),(0,o.useEffect)(()=>{u(t)},[t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a(),{children:[(0,i.jsx)("title",{children:"Fuku Shop | Cat\xe1logo de ropa urbana"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,i.jsxs)("main",{className:"jsx-2fa593d3f84fcd72",children:[(0,i.jsx)(b,{categories:s,types:r,colors:c,sizes:l,products:d,setProducts:u,originalProducts:t,maxPrice:p,minPrice:_,queryCategory:x?x._id:null}),(0,i.jsx)(k,{products:d,sizes:l}),(0,i.jsx)(n(),{id:"2fa593d3f84fcd72",children:"main.jsx-2fa593d3f84fcd72{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100vw}@media screen and (max-width:900px){main.jsx-2fa593d3f84fcd72{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}"})]})]})}},1568:function(e,t,s){"use strict";s.d(t,{Z:function(){return p}});var i=s(5893),r=s(1664),n=s.n(r),o=s(7294),c=s(6882),a=s.n(c),l=s(9417),d=s(9603);function u(e){let{colors:t,colorSelected:s,setColorSelected:r}=e,n=e=>{r(e)};if(s)return(0,i.jsx)("div",{className:a().product_colors_list,children:t.map(e=>(0,i.jsx)("button",{onClick:()=>n(e),className:a().product_color,style:{background:e.hex},children:s.name===e.name&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:a().product_color__selected,children:(0,i.jsx)(d.G,{icon:l.LEp})}),(0,i.jsxs)("span",{className:"sr-only",children:["Cambiar a color ",e.name]})]})},e._id))})}var _=s(5675),h=s.n(_);function p(e){let{product:t,sizes:s}=e,[r,c]=(0,o.useState)({}),[l,d]=(0,o.useState)([]),_=()=>{let e=t.colors.map(e=>e.name);d(e),c(t.colors[0])};return(0,o.useEffect)(()=>{_()},[]),(0,i.jsxs)("div",{className:a().product_card,animation:"appear",children:[(0,i.jsx)("div",{className:a().product_card__image_container,children:(0,i.jsx)(h(),{src:r.principalImage,alt:t.name,fill:!0,style:{objectFit:"contain"}})}),t.discount>0&&(0,i.jsxs)("span",{className:a().product_card__discount,children:[t.discount,"% OFF"]}),(0,i.jsx)(u,{colors:t.colors,product:t,colorSelected:r,setColorSelected:c}),(0,i.jsxs)("div",{className:a().product_card__info,children:[(0,i.jsx)("h3",{className:a().product_name,children:t.name}),(0,i.jsx)("p",{className:a().clothe_type,children:t.clothe_type.name}),(0,i.jsx)("p",{className:a().product_price,children:t.discount>0?(0,i.jsxs)(i.Fragment,{children:["$",t.priceWithOffer,(0,i.jsx)("span",{className:a().product_price__discount,children:t.price})]}):"$".concat(t.price)}),s.length>0&&(0,i.jsx)("div",{className:a().product_sizes,children:(0,i.jsx)("ul",{className:a().product_sizes__list,children:s.map(e=>(0,i.jsx)("li",{className:a().product_sizes__item,children:e.name},e._id))})}),(0,i.jsx)(n(),{href:encodeURI("/producto/".concat(t.name)).replaceAll("%20","_"),className:a().product_card__link,children:(0,i.jsx)("button",{children:"Ver producto"})})]})]},t._id)}},3167:function(e){e.exports={filters_button_active:"Filters_filters_button_active__8IW3o",products_filter:"Filters_products_filter__SH8y5",close_filters:"Filters_close_filters__VmmzI",filter:"Filters_filter__mdvon"}},5952:function(e){e.exports={products_section:"ProductsSection_products_section__hJhCJ"}},6882:function(e){e.exports={product_card:"ProductCard_product_card__See_q",product_card__image_container:"ProductCard_product_card__image_container__s27xb",product_card__info:"ProductCard_product_card__info__P9reZ",product_sizes:"ProductCard_product_sizes__Z_ot4",product_card__link:"ProductCard_product_card__link__Kk8LB",product_card__discount:"ProductCard_product_card__discount__5FFzR",product_colors_list:"ProductCard_product_colors_list__E7ItJ",product_color:"ProductCard_product_color__c1uEZ",product_color__selected:"ProductCard_product_color__selected__xIsiO",product_name:"ProductCard_product_name__uO1BP",clothe_type:"ProductCard_clothe_type__0HWTd",product_price:"ProductCard_product_price__RThHA",product_price__discount:"ProductCard_product_price__discount__oIAKG",product_sizes__list:"ProductCard_product_sizes__list__B9Sba",product_sizes__item:"ProductCard_product_sizes__item__tYJZg"}},4175:function(e){e.exports={selectionable_items:"CheckboxList_selectionable_items___rgLV",selectionable_items__item:"CheckboxList_selectionable_items__item__pQUYY",box:"CheckboxList_box__qKwfM",label:"CheckboxList_label__esM7I"}},4802:function(e){e.exports={card:"DoubleRangeSelecter_card__w2ijo",current_value:"DoubleRangeSelecter_current_value__fFmJn",values:"DoubleRangeSelecter_values__5elb9",slider:"DoubleRangeSelecter_slider__k_2xY",min:"DoubleRangeSelecter_min__JxR77",min_drag:"DoubleRangeSelecter_min_drag__HuMXm",max:"DoubleRangeSelecter_max__enPnW",max_drag:"DoubleRangeSelecter_max_drag__c0zV9"}},9008:function(e,t,s){e.exports=s(3121)},1163:function(e,t,s){e.exports=s(880)}},function(e){e.O(0,[857,774,888,179],function(){return e(e.s=4918)}),_N_E=e.O()}]);